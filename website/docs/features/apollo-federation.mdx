---
id: apollo-federation
title: Apollo Federation Gateway as GraphQL Yoga
sidebar_label: Apollo Federation
---

[Apollo Federation is a specification that applies microservice architecture through GraphQL APIs.](https://www.apollographql.com/docs/federation/)

Thanks to [Envelop's Apollo Federation](https://www.envelop.dev/plugins/use-apollo-federation) plugin, we can use GraphQL Yoga to build our gateway server.

## Installation

<PackageInstall packages={['@envelop/apollo-federation']} />

## Example

```ts
import { createServer } from 'graphql-yoga'
import { ApolloGateway } from '@apollo/gateway'
import { useApolloFederation } from '@envelop/apollo-federation'

// Initialize the gateway
const gateway = new ApolloGateway({
  serviceList: [
    { name: 'accounts', url: 'http://localhost:4001' },
    { name: 'products', url: 'http://localhost:4002' },
    // ...additional subgraphs...
  ],
})

// Make sure all services are loaded
await gateway.load()

const server = createServer({
  schema: gateway.schema,
  plugins: [
    useApolloFederation({
      gateway,
    }),
  ],
})

// Start the server and explore http://localhost:4000/graphql
server.start()
```
